<div class="row justify-content-around align-content-center mb-3 mt-5">
  <div class="row">
    <div class="row justify-content-around align-content-center">
      <div class="col-12 col-lg-10">
        <form [formGroup]="addEmployeeFormGroup" (ngSubmit)="submit()">
          <div class="card m-3 p-3">
            <div class="row justify-content-around align-content-center mb-5">
              <strong class="h2 fw-bold pb-3 myHeader text-center">Dodaj nowego pracownika</strong>
              <div class="line"></div>
            </div>
            <div class="h4 pb-4">Dane osobowe</div>
            <div class="row mb-3">
              <ngx-loading [show]="loading"></ngx-loading>
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="detailUserResponse.firstName" value="{{detailUserResponse.firstName}}"
                           class="form-control" name="firstName" type="text" placeholder="Imię"
                           formControlName="firstName"
                           [ngClass]="{activeRedBorder: hasError('firstName')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['firstName']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('firstName', 'required')">Pole nie może być
                      puste</small>
                    <small class="text-danger h5" *ngIf="checkError('firstName', 'minlength')">Pole powinno zawierać
                      minimum 3 znaki</small>
                    <small class="text-danger h5" *ngIf="checkError('firstName', 'maxlength')">Pole powinno zawierać
                      maximum 100 znaków</small>
                  </div>
                </div>
              </div>

              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="detailUserResponse.lastName" class="form-control" name="lastName" type="text"
                           placeholder="Nazwisko" formControlName="lastName"
                           [ngClass]="{activeRedBorder: hasError('lastName')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['lastName']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('lastName', 'required')">Pole nie może być
                      puste</small>
                    <small class="text-danger h5" *ngIf="checkError('lastName', 'minlength')">Pole powinno zawierać
                      minimum 3 znaki</small>
                    <small class="text-danger h5" *ngIf="checkError('lastName', 'maxlength')">Pole powinno zawierać
                      maximum 100 znaków</small>
                  </div>
                </div>


              </div>

            </div>
            <div class="row mb-3">
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="detailUserResponse.email" class="form-control" name="email" type="email"
                           placeholder="Email" formControlName="email"
                           [ngClass]="{activeRedBorder: hasError('email')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['email']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('email', 'required')">Pole nie może być
                      puste</small>
                    <small class="text-danger h5" *ngIf="checkError('email', 'email')">Nieprawidłowa forma maila</small>
                  </div>
                </div>


              </div>
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="phone" class="form-control" name="phone" type="text"
                           placeholder="Telefon" formControlName="phone"
                           [ngClass]="{activeRedBorder: hasError('phone')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['phone']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('phone', 'required')">Pole nie może być
                      puste</small>
                    <small class="text-danger h5" *ngIf="checkError('phone', 'minlength')">Pole powinno zawierać 9
                      znaków</small>
                    <small class="text-danger h5" *ngIf="checkError('phone', 'maxlength')">Pole powinno zawierać 9
                      znaków</small>
                    <small class="text-danger h5" *ngIf="checkError('phone', 'pattern')">Pole powinno zawierać
                      cyfry</small>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input class="form-control" readonly placeholder="Data urodzenia"
                           name="birthdayDate" [(ngModel)]="birthDay" ngbDatepicker [footerTemplate]="footerTemplate"
                           [maxDate]="today"
                           formControlName="birthdayDate" [ngClass]="{activeRedBorder: hasError('birthdayDate')}"
                           #d="ngbDatepicker" (click)="d.toggle()">

                  </div>
                </div>
                <ng-template #footerTemplate>
                  <hr class="my-0">
                  <button class="btn btn-secondary btn-sm m-2 float-end" (click)="d.close()">Zamknij</button>
                </ng-template>
                <div *ngIf="addEmployeeFormGroup.controls['birthDay']?.touched" class="row">
                  <small class="text-danger h5" *ngIf="checkError('birthDay', 'required')">Pole nie może być
                    puste</small>
                </div>
              </div>
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input class="form-control" readonly placeholder="Data zatrudnienia"
                           name="employeeDate" [(ngModel)]="employeeDate" ngbDatepicker [footerTemplate]="footerTemplate"
                           [maxDate]="employeeDate"
                           formControlName="employeeDate" [ngClass]="{activeRedBorder: hasError('employeeDate')}"
                           #dT="ngbDatepicker" (click)="dT.toggle()">

                  </div>
                </div>
                <ng-template #footerTemplate>
                  <hr class="my-0">
                  <button class="btn btn-secondary btn-sm m-2 float-end" (click)="d.close()">Zamknij</button>
                </ng-template>
                <div *ngIf="addEmployeeFormGroup.controls['employeeDate']?.touched" class="row">
                  <small class="text-danger h5" *ngIf="checkError('employeeDate', 'required')">Pole nie może być
                    puste</small>
                  <small class="text-danger h5" *ngIf="checkError('employeeDate', 'employeeDateValid')">
                    Data zatrudnienia nie może być wczęsniejsza ni z data urodzenia</small>
                </div>
              </div>
            </div>
            <div class="h4 pb-4 mt-4">Dane kontaktowe</div>
            <div class="row mb-3">
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="detailUserResponse.addressView.street" class="form-control" name="street"
                           type="text" placeholder="Ulica" formControlName="street"
                           [ngClass]="{activeRedBorder: hasError('street')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['street']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('street', 'required')">Pole nie może być
                      puste</small>
                    <small class="text-danger h5" *ngIf="checkError('street', 'minlength')">Pole powinno zawierać
                      minimum 3 znaki</small>
                    <small class="text-danger h5" *ngIf="checkError('street', 'maxlength')">Pole powinno zawierać
                      maximum 100 znaków</small>
                  </div>
                </div>


              </div>
              <div class="col-6">

                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="detailUserResponse.addressView.houseNr" [ngModelOptions]="{standalone: true}"
                           [value]="detailUserResponse?.addressView?.houseNr" name="houseNr" class="form-control"
                           type="text" placeholder="Numer domu"/>

                  </div>
                </div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input class="form-control" name="zipCode" type="text" placeholder="Kod pocztowy"
                           formControlName="zipCode"
                           [(ngModel)]="detailUserResponse.addressView.zipCode"
                           [value]="detailUserResponse?.addressView?.zipCode"
                           [ngClass]="{activeRedBorder: hasError('zipCode')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['zipCode']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('zipCode', 'required')">Pole nie może być
                      puste</small>
                    <small class="text-danger h5" *ngIf="checkError('zipCode', 'pattern')">Kod powinien mieć postać
                      xx-xxx lub xxxxx i składać się z cyfr</small>

                  </div>
                </div>


              </div>
              <div class="col-6">
                <div class="row">
                  <div class="input-group">
                    <input [(ngModel)]="detailUserResponse.addressView.city"
                           [value]="detailUserResponse?.addressView?.city" class="form-control" name="city" type="text"
                           placeholder="Miasto" formControlName="city"
                           [ngClass]="{activeRedBorder: hasError('city')}"/>
                  </div>
                  <div *ngIf="addEmployeeFormGroup.controls['city']?.touched" class="row">
                    <small class="text-danger h5" *ngIf="checkError('city', 'required')">Pole nie może być puste</small>
                    <small class="text-danger h5" *ngIf="checkError('city', 'minlength')">Pole powinno zawierać
                      minimum 3 znaki</small>
                    <small class="text-danger h5" *ngIf="checkError('city', 'maxlength')">Pole powinno zawierać
                      maximum 100 znaków</small>
                  </div>
                </div>


              </div>
            </div>


            <div class="h4 pb-4 mt-4">Hasło</div>

            <div class="row mb-3">

              <div class="col-6">
                <input [(ngModel)]="password" class="form-control" name="password" type="password" placeholder="Hasło"
                       formControlName="password"
                       [ngClass]="{activeRedBorder: hasError('password')}"/>
                <div *ngIf="addEmployeeFormGroup.controls['password']?.touched" class="row">
                  <small class="text-danger h5" *ngIf="checkError('password', 'required')">Pole nie może być
                    puste</small>
                  <small class="text-danger h5" *ngIf="checkError('password', 'minlength')">Pole powinno zawierać
                    przynajmniej 8 znaków</small>
                  <small class="text-danger h5" *ngIf="checkError('password', 'passwordStrength')">Pole powinno zawierać
                    przynajmniej jedą cyfrę, jedną małą literę i jedną dużą literę</small>
                </div>
              </div>
              <div class="col-6">
                <input class="form-control" name="repeatPassword" type="password" placeholder="Powtórz hasło"
                       formControlName="repeatPassword"
                       [ngClass]="{activeRedBorder: hasError('repeatPassword')}"/>
                <div *ngIf="addEmployeeFormGroup.controls['repeatPassword']?.touched" class="row">
                  <small class="text-danger h5" *ngIf="checkError('repeatPassword', 'required')">Pole nie może być
                    puste</small>
                  <small class="text-danger h5" *ngIf="checkError('repeatPassword', 'passwordNotSame')">Hasła są
                    różne</small>

                </div>
              </div>
              <div class="col-6">
                <div class="form-group">
                  <label style="font-size: medium" for="frame_filter">Wybierz oddział</label>
                  <select id="frame_filter" class="form-select col-8" aria-label="Default select example"
                          formControlName="branch"[(ngModel)]="selectedBranchOption">
                    <option *ngFor="let branch of branches" value="{{branch.branchId}}">{{branch.street}} {{branch.city}}</option>
                  </select>
                </div>
              </div>

            </div>
            <div class="form-check form-check-inline h5 pb-4 pt-4">
              <input class="form-check-input" type="checkbox" id="term" [checked]="detailUserResponse.isAdmin"  (change)="changeStatusOfAdminCheckbox()">
              <label class="form-check-label" for="term">Admin</label>
            </div>

            <div class="row mx-1" style="max-width: 15vmin">
              <button class="btn btn-primary" type="submit">Dodaj</button>
            </div>
            <div class="row" *ngIf="isErrorActive">
              <small class="text-danger h5">
                {{errorMsg}}
              </small>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

